<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:insert="partials/head :: head"></th:block>
    <link rel="stylesheet" href="../css/navbar.css">
    <link rel="stylesheet" href="../css/events.css">
    <link rel="stylesheet" href="../css/openhelp.css">

    <title>Single Event</title>
</head>
<body>
<nav th:insert="partials/navbar :: navbar"></nav>


    <h1 class="text-center"> Showing Single Event</h1>


<div class="row p-5 justify-content-center">
    <div class="col-sm-12 col-md-8">
        <div class="card mb-3 p-2 border-dark" style="width: 100%;">
            <div class="row no-gutters">
                <div class="col-md-4">
                    <img th:src="@{${event.getImages()}}" alt="user avatar" class="card-img">
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h1 class="card-title" th:text="${event.getTitle()}"></h1>
                        <hr>
                        <h3 th:text="${event.getLocation()}"></h3>
                        <h3 th:text="${event.getAddress()}"></h3>
                        <h3 th:text="${event.getDate_time()}"></h3>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">
                                <h3>Event Summary</h3>
                                <span th:text="${event.getSummary()}"></span>
                            </li>
                            <li class="list-group-item">
                                <h3>Details</h3>
                                <span th:text="${event.getDetails()}"></span>
                            </li>
                            <li class="list-group-item">
                                <h3>Notes</h3>
                                <span th:text="${event.getNotes()}"></span>
                            </li>
                            <li class="list-group-item">
                                <h3>Volunteer Limit</h3>
                                <span th:text="${event.getVol_limit()}"></span>
                            </li>
                            <li class="list-group-item">
                                <div th:each="ev : ${event.getUserEvents()}">
                                    <div th:if="${ev.isIs_creator()}">
                                        <p>Created by: </p>
                                        <p>
                                            <a th:href="@{'mailto:' + ${ev.getUser().getEmail()}}"
                                               th:text="${ev.getUser().getEmail()}"></a>
                                            <a th:href="@{'/user/' + ${ev.getUser().getId()}}" th:text="${ev.getUser().getName()}"></a>
                                        </p>

                                    </div>
                                </div>
                            </li>
                            <li class="list-group-itme">
                                <div th:if="${event.getUserEvents().size() <= event.getLimit()}">
                                    <a th:href="@{'/events/singleevent/' + ${event.getId()} + '/enroll'}">Enroll</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="card-footer">
                        <div th:each="category : ${event.getCategories()}">
                            <span class="badge badge-pill badge-light" th:text="${category.getName()}"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--    !!!!!!!!!!!!!!!!! NEED TO ATTACH USER TO SINGLE EVENT !!!!!!!!!!!!!!!!!!!!!!!!-->

    <!--        <h3> created by: <span th:text="${event.user.email}"></span></h3>-->
    <!--        <h3> created by user with id <span th:text="${event.user.id}"> </span></h3>-->


    <!--        <div th:if="${event.details != null}">-->
    <!--            <h3 th:text="${event.eventDetails.topicDescription}"></h3>-->
    <!--            <p>History of post:-->
    <!--                <span th:text="${event.eventDetails.historyOfEvent}"></span>-->
    <!--            </p>-->
    <!--        </div>-->

    <!--        <div class="mx-auto">-->
    <!--            <div th:each="image : ${event.images}">-->
    <!--                <div>-->
    <!--                    <img th:src="${image}" style="height: 300px; margin-left: 10px; margin-right: 10px;"/>-->
    <!--                </div>-->
    <!--            </div>-->
    <!--        </div>-->

    <div th:if="${creator.getId() == userId}">
        <!--edit post-->
        <div class="d-flex">
            <a th:href="@{'/events/edit/'+${event.id}}" class="btn">
                <button>Edit Event</button>
            </a>
            <!--delete post-->
            <a th:href="@{'/events/delete/'+ ${event.id}}" class="btn">
                <button>Delete Event</button>
            </a>
        </div>
    </div>


</div>
</div>

<nav th:insert="partials/navbar :: footer"></nav>

</body>
</html>
