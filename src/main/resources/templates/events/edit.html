<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <th:block th:insert="partials/head :: head"></th:block>
<!--    <link rel="stylesheet" href="/css/navbar.css">-->
<!--    <link rel="stylesheet" href="/css/events.css">-->
<!--    <link rel="stylesheet" href="/css/openhelp.css">-->
    <script src="https://static.filestackapi.com/filestack-js/3.x.x/filestack.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.bundle.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="/css/main.css">

    <title>Edit Event</title>
</head>

<body>
<nav th:insert="partials/navbar :: navbar"></nav>

<h1 class="text-center"> Edit Event</h1>



<div class="forms-section createeventform container">
                <form class="forms mx-auto" th:action="@{/events/edit}" method="post" th:object="${event}">
        <fieldset>
            <input type="hidden" th:field="*{id}">
            <legend class="section-title">Enter your event details below</legend>
            <!--                event title-->
            <div class="input-block">
                <label for="title">Title</label>
                <input th:placeholder="Title" id="title" type="text" th:field="*{title}" required>
            </div>
            <!--                event address-->
            <div class="input-block">
                <label for="address">Address</label>
                <input th:placeholder="Address" id="address" type="text" th:field="*{address}" required>
            </div>
            <!--                event location-->
            <div class="input-block">
                <label for="location">Location</label><br>
                <input th:placeholder="Location" id="location" th:field="*{location}" required>
            </div>
            <div class="input-block">
                <label for="date">Date</label>
                <input id="date" type="datetime-local" th:field="*{date_time}" value="2020-06-12T19:30:00.00" required>
            </div>
            <!--                max volunteers-->
            <div class="input-block">
                <label for="volume">Max people</label>
                <input th:placeholder="max" id="volume" type="text" th:field="*{vol_limit}" required>
            </div>
            <!--                image-->
            <div class="input-block">
                <button class="button btn-doEdit mt-1 mr-2" type="button" id="picker">Change Image</button>
                <input type="text" name="image" id="fileupload" th:placeholder="image" th:field="*{images}">
                <!--                <button class="button btn-doUpload mt-1" type="submit">Submit Image</button>-->
            </div>
            <!--                event summary-->
            <div class="input-block">
                <label for="summary">Summary</label><br>
                <textarea placeholder="Tell us a little about your event!" id="summary" th:field="*{summary}" required></textarea>
            </div>
            <!--                event notes-->
            <div class="input-block">
                <label for="notes">Notes</label><br>
                <textarea placeholder="Is there anything that visitors or volunteers know? Rain or shine, bring comfy shoes, etc..." id="notes" type="textarea" th:field="*{notes}"
                          required></textarea>
            </div>
            <!--                event details-->
            <div class="input-block">
                <label for="details">Details</label><br>
                <textarea placeholder="details? " id="details" type="textarea" th:field="*{details}"
                          required></textarea>
            </div>

            <!-- categories -->
            <div class="input-block" id="checkbox">
                <div th:each="category : ${categories}">
                    <input name="categories" type="checkbox" th:value="${category.getId()}" th:text="${category.getName()}"></li>
                </div>
            </div>

            <div class="d-flex m-auto p-1">
                <button type="submit" class="btn-submit p-2">Continue</button>
            </div>
        </fieldset>
    </form>
</div>





<!--<div class="container editevent">-->
<!--    <div class="forms-section">-->
<!--        <div class="forms">-->
<!--            <form class="forms" th:action="@{/events/edit}" method="post" th:object="${event}">-->
<!--                <fieldset>-->
<!--                    <legend class="section-title">Edit your event details below</legend>-->
<!--                    &lt;!&ndash;                event title&ndash;&gt;-->
<!--                    <div class="input-block">-->
<!--                        <label for="title">Title</label>-->
<!--                        <input th:placeholder="Title" id="title" type="text" th:field="*{title}" required>-->
<!--                    </div>-->
<!--                    &lt;!&ndash;                event address&ndash;&gt;-->
<!--                    <div class="input-block">-->
<!--                        <label for="address">Address</label>-->
<!--                        <input th:placeholder="Address" id="address" type="text" th:field="*{address}" required>-->
<!--                    </div>-->

<!--                    &lt;!&ndash;                event date&ndash;&gt;-->
<!--                    <div class="input-block">-->
<!--                        <label for="datetime">Choose Date/time YYYY/MM/DDT00:00</label>-->
<!--                        &lt;!&ndash;                    <input class="form-control" id="datetime" th:placeholder="" style="width:100%;"/>&ndash;&gt;-->
<!--                        &lt;!&ndash;                    <input class="form-control" id="datetime" th:placeholder="${getDate_time()}" style="width:100%;"/>&ndash;&gt;-->
<!--                        <input type='text' placeholder="Date" th:field="*{date_time}" id="datetime">-->
<!--                    </div>-->
<!--                    &lt;!&ndash;                &lt;!&ndash;                event date&ndash;&gt;&ndash;&gt;-->
<!--                    &lt;!&ndash;                                <div class="input-block">&ndash;&gt;-->
<!--                    &lt;!&ndash;                                    <label for="date">Date</label>&ndash;&gt;-->
<!--                    &lt;!&ndash;                                    <input th:placeholder="Date" id="date" type="date" th:field="*{date}" required>&ndash;&gt;-->
<!--                    &lt;!&ndash;                                </div>&ndash;&gt;-->
<!--                    &lt;!&ndash;                &lt;!&ndash;                event time&ndash;&gt;&ndash;&gt;-->
<!--                    &lt;!&ndash;                <div class="input-block">&ndash;&gt;-->
<!--                    &lt;!&ndash;                    <label for="time">Time</label>&ndash;&gt;-->
<!--                    &lt;!&ndash;                    <input th:placeholder="Time" id="time" type="time" th:field="*{time}" required>&ndash;&gt;-->
<!--                    &lt;!&ndash;                </div>&ndash;&gt;-->
<!--                    &lt;!&ndash;                event location&ndash;&gt;-->

<!--                    <div class="input-block">-->
<!--                        <label for="volume">Max people</label>-->
<!--                        <input th:placeholder="max" id="volume" type="text" th:field="*{vol_limit}" required>-->
<!--                    </div>-->

<!--                    &lt;!&ndash;                image&ndash;&gt;-->
<!--                    <div class="input-block">-->
<!--                        <label for="image">Image URL</label>-->
<!--                        <input th:placeholder="image" id="image" type="url" th:field="*{images}" required>-->
<!--                    </div>-->
<!--                    &lt;!&ndash;                event notes&ndash;&gt;-->
<!--                    <div class="input-block">-->
<!--                        <label for="notes">Notes</label><br>-->
<!--                        <textarea th:placeholder="notes" id="notes" type="textarea" th:field="*{notes}"-->
<!--                                  required></textarea>-->
<!--                    </div>-->

<!--                    <div class="input-block">-->
<!--                        <label for="details">Details</label><br>-->
<!--                        <textarea th:placeholder="details" id="details" type="textarea" th:field="*{details}"-->
<!--                                  required></textarea>-->
<!--                    </div>-->
<!--                    &lt;!&ndash;                event summary&ndash;&gt;-->
<!--                    <div class="input-block">-->
<!--                        <label for="summary">Summary</label><br>-->
<!--                        <textarea th:placeholder="Address" id="summary" th:field="*{summary}" required></textarea>-->
<!--                    </div>-->

<!--                    &lt;!&ndash;                event location&ndash;&gt;-->
<!--                    <div class="input-block">-->
<!--                        <label for="location">Location</label><br>-->
<!--                        <textarea th:placeholder="Location" id="location" th:field="*{location}" required></textarea>-->
<!--                    </div>-->
<!--                    <div class="input-block">-->
<!--                        <label>Categories</label>-->
<!--                        <div th:each="category : ${ categories}">-->
<!--                            <input th:field="*{categories}" type="checkbox" th:value="${category.getId()}"-->
<!--                                   th:text="${category.getName()}">-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div>-->
<!--                        <input type="hidden" name="id" th:value="${event.id}"/>-->
<!--                    </div>-->
<!--                    <div class="d-inline-block m-auto">-->
<!--                        <button type="submit" class="btn-submit">Continue</button>-->
<!--                    </div>-->
<!--                </fieldset>-->
<!--            </form>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<nav th:insert="partials/navbar :: footer"></nav>
<script>
    $('#editInfoModal').on('shown.bs.modal', function () {
        $('#modalButton').trigger('focus')
    });

    document.getElementById('picker').addEventListener('click', function (e) {
        e.preventDefault();
        picker.open();
    });

    // Set up the picker
    const client = filestack.init("AChLkyrSmK6VdYPhk8lw9z");

    //set up picker options
    const options = {
        onUploadDone: updateForm,
        maxSize: 10 * 500 * 500,
        accept: 'image/*',
        uploadInBackground: false,
    };
    const picker = client.picker(options);

    // Get references to the DOM elements

    const form = document.getElementById('pick-form');
    const fileInput = document.getElementById('fileupload');
    // const btn = document.getElementById('picker');
    const nameBox = document.getElementById('nameBox');
    const urlBox = document.getElementById('urlBox');


    // Helper to overwrite the field input value

    function updateForm(result) {
        const fileData = result.filesUploaded[0];
        fileInput.value = fileData.url;

        // Some ugly DOM code to show some data.
        const name = document.createTextNode('Selected: ' + fileData.filename);
        const url = document.createElement('a');
        url.href = fileData.url;
        url.appendChild(document.createTextNode(fileData.url));
        nameBox.appendChild(name);
        // urlBox.appendChild(document.createTextNode('Uploaded to: '));
        // urlBox.appendChild(url);
        $('#fileupload').attr('value', url);
    }

</script>
</body>
</html>
